{
  "version": 3,
  "sources": ["../src/live-reload.ts"],
  "sourcesContent": ["interface EsbuildChangeEventData {\r\n    added: string[];\r\n    removed: string[];\r\n    updated: string[];\r\n}\r\n\r\ninterface EsbuildChangeEvent {\r\n    data: string;\r\n}\r\n\r\nnew EventSource(\"/esbuild\").addEventListener(\"change\", (e: EsbuildChangeEvent) => {\r\n    const { added, removed, updated } = JSON.parse(e.data) as EsbuildChangeEventData;\r\n\r\n    if (!added.length && !removed.length && updated.length >= 1) {\r\n\r\n        const cssUpdates = updated.filter(u => u.toLowerCase().endsWith(\".css\"));\r\n        const links = Array.from(document.querySelectorAll<HTMLLinkElement>(\"link[rel='stylesheet']\"));\r\n        for (const u of cssUpdates) {\r\n            const currentLink = links.find(l => {\r\n                const url = new URL(l.href);\r\n                return url.origin === location.origin && url.pathname === u;\r\n            });\r\n            if (currentLink) {\r\n                const newLink = currentLink.cloneNode() as HTMLLinkElement;\r\n                newLink.href = `${updated[0]}?${Math.random().toString(36).slice(2)}`;\r\n                newLink.onload = () => currentLink.remove();\r\n                currentLink.parentNode!.insertBefore(newLink, currentLink.nextSibling);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    location.reload();\r\n});\r\n"],
  "mappings": "AAUA,IAAI,YAAY,UAAU,EAAE,iBAAiB,SAAWA,GAA0B,CAC9E,KAAM,CAAE,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAQ,EAAI,KAAK,MAAMH,EAAE,IAAI,EAErD,GAAI,CAACC,EAAM,QAAU,CAACC,EAAQ,QAAUC,EAAQ,QAAU,EAAG,CAEzD,MAAMC,EAAaD,EAAQ,OAAOE,GAAKA,EAAE,YAAY,EAAE,SAAS,MAAM,CAAC,EACjEC,EAAQ,MAAM,KAAK,SAAS,iBAAkC,wBAAwB,CAAC,EAC7F,UAAWD,KAAKD,EAAY,CACxB,MAAMG,EAAcD,EAAM,KAAKE,GAAK,CAChC,MAAMC,EAAM,IAAI,IAAID,EAAE,IAAI,EAC1B,OAAOC,EAAI,SAAW,SAAS,QAAUA,EAAI,WAAaJ,CAC9D,CAAC,EACD,GAAIE,EAAa,CACb,MAAMG,EAAUH,EAAY,UAAU,EACtCG,EAAQ,KAAO,GAAGP,EAAQ,CAAC,KAAK,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,MAAM,CAAC,IAClEO,EAAQ,OAAS,IAAMH,EAAY,OAAO,EAC1CA,EAAY,WAAY,aAAaG,EAASH,EAAY,WAAW,EACrE,SAIZ,SAAS,OAAO,CACpB,CAAC",
  "names": ["e", "added", "removed", "updated", "cssUpdates", "u", "links", "currentLink", "l", "url", "newLink"]
}
