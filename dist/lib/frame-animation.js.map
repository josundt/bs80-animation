{
  "version": 3,
  "sources": ["../../src/lib/frame-animation.ts"],
  "sourcesContent": ["export interface IFrameAnimation {\r\n    start(): boolean;\r\n    stop(): boolean;\r\n}\r\n\r\nexport class FrameAnimation implements IFrameAnimation {\r\n\r\n    constructor(\r\n        private readonly cbRenderFrame: (time: DOMHighResTimeStamp) => boolean,\r\n        private readonly cbStopped?: () => void\r\n    ) {}\r\n\r\n    private started: boolean = false;\r\n    private currAnimationFrame: number | null = null;\r\n\r\n    start(): boolean {\r\n        const result = !this.started;\r\n        const render = (time: DOMHighResTimeStamp): void => {\r\n            if (this.started) {\r\n                this.started = this.cbRenderFrame(time);\r\n            }\r\n            if (!this.started) {\r\n                this.cbStopped?.();\r\n            } else {\r\n                this.currAnimationFrame = requestAnimationFrame(render);\r\n            }\r\n        };\r\n        this.started = true;\r\n        this.currAnimationFrame = requestAnimationFrame(render);\r\n        return result;\r\n    }\r\n\r\n    stop(): boolean {\r\n        const result = this.started;\r\n        this.started = false;\r\n        if (this.currAnimationFrame) {\r\n            cancelAnimationFrame(this.currAnimationFrame);\r\n        }\r\n        if (result) {\r\n            this.cbStopped?.();\r\n        }\r\n        return result;\r\n    }\r\n}\r\n"],
  "mappings": "AAKO,MAAMA,CAA0C,CAEnD,YACqBC,EACAC,EACnB,CAFmB,mBAAAD,EACA,eAAAC,EAGrB,KAAQ,QAAmB,GAC3B,KAAQ,mBAAoC,IAHzC,CAKH,OAAiB,CACb,MAAMC,EAAS,CAAC,KAAK,QACfC,EAAUC,GAAoC,CAjB5D,IAAAC,EAkBgB,KAAK,UACL,KAAK,QAAU,KAAK,cAAcD,CAAI,GAErC,KAAK,QAGN,KAAK,mBAAqB,sBAAsBD,CAAM,GAFtDE,EAAA,KAAK,YAAL,MAAAA,EAAA,UAIR,EACA,YAAK,QAAU,GACf,KAAK,mBAAqB,sBAAsBF,CAAM,EAC/CD,CACX,CAEA,MAAgB,CAhCpB,IAAAG,EAiCQ,MAAMH,EAAS,KAAK,QACpB,YAAK,QAAU,GACX,KAAK,oBACL,qBAAqB,KAAK,kBAAkB,EAE5CA,KACAG,EAAA,KAAK,YAAL,MAAAA,EAAA,YAEGH,CACX,CACJ",
  "names": ["FrameAnimation", "cbRenderFrame", "cbStopped", "result", "render", "time", "_a"]
}
