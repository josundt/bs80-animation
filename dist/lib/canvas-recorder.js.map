{
  "version": 3,
  "sources": ["../../src/lib/canvas-recorder.ts"],
  "sourcesContent": ["export namespace CanvasRecorder {\r\n    // Must be called before starting animation\r\n    export function recordCanvasAsMovieFile(ctx: CanvasRenderingContext2D): void {\r\n        const chunks: Blob[] = [];\r\n        const stream = ctx.canvas.captureStream(200);\r\n        const recorder = new MediaRecorder(stream, {\r\n            mimeType: \"video/webm; codecs=vp9\",\r\n            videoBitsPerSecond: 335544320\r\n        });\r\n\r\n        // Record data in chunks array when data is available\r\n        recorder.ondataavailable = evt => chunks.push(evt.data);\r\n\r\n        // Provide recorded data when recording stops\r\n        recorder.onstop = () => {\r\n            // Gather chunks of video data into a blob and create an object URL\r\n            const blob = new Blob(chunks, { type: \"video/webm; codecs=vp9\" });\r\n            const url = URL.createObjectURL(blob);\r\n            // Attach the object URL to an <a> element, setting the download file name\r\n            const a = document.createElement(\"a\");\r\n            //a.style = \"display: none;\";\r\n            a.href = url;\r\n            a.download = \"perspective-grid.webm\";\r\n            // document.body.appendChild(a);\r\n            // Trigger the file download\r\n            a.click();\r\n            setTimeout(() => {\r\n                // Clean up - see https://stackoverflow.com/a/48968694 for why it is in a timeout\r\n                URL.revokeObjectURL(url);\r\n                // document.body.removeChild(a);\r\n            }, 0);\r\n        };\r\n\r\n        // Start recording using a 1s timeslice [ie data is made available every 1s)\r\n        recorder.start(10);\r\n    }\r\n}\r\n"],
  "mappings": "AAAO,IAAUA,MAAV,CAEI,SAASC,EAAwBC,EAAqC,CACzE,MAAMC,EAAiB,CAAC,EAClBC,EAASF,EAAI,OAAO,cAAc,GAAG,EACrCG,EAAW,IAAI,cAAcD,EAAQ,CACvC,SAAU,yBACV,mBAAoB,SACxB,CAAC,EAGDC,EAAS,gBAAkBC,GAAOH,EAAO,KAAKG,EAAI,IAAI,EAGtDD,EAAS,OAAS,IAAM,CAEpB,MAAME,EAAO,IAAI,KAAKJ,EAAQ,CAAE,KAAM,wBAAyB,CAAC,EAC1DK,EAAM,IAAI,gBAAgBD,CAAI,EAE9BE,EAAI,SAAS,cAAc,GAAG,EAEpCA,EAAE,KAAOD,EACTC,EAAE,SAAW,wBAGbA,EAAE,MAAM,EACR,WAAW,IAAM,CAEb,IAAI,gBAAgBD,CAAG,CAE3B,EAAG,CAAC,CACR,EAGAH,EAAS,MAAM,EAAE,CACrB,CAjCOL,EAAS,wBAAAC,IAFHD,MAAA",
  "names": ["CanvasRecorder", "recordCanvasAsMovieFile", "ctx", "chunks", "stream", "recorder", "evt", "blob", "url", "a"]
}
