{
  "version": 3,
  "sources": ["../../src/lib/timing.ts"],
  "sourcesContent": ["import { Logger } from \"./logger.js\";\r\n\r\nexport namespace Timing {\r\n\r\n    const logger = new Logger();\r\n\r\n    export function delayAsync(ms: number, abortSignal?: AbortSignal): Promise<void> {\r\n        let timer: number | null = null;\r\n        const onAbort = (): void => {\r\n            if (timer) {\r\n                clearTimeout(timer);\r\n                timer = null;\r\n            }\r\n            abortSignal?.removeEventListener(\"abort\", onAbort);\r\n            logger.debug(\"Delay aborted\");\r\n        };\r\n        return new Promise(r => {\r\n            timer = setTimeout(r, ms);\r\n            abortSignal?.addEventListener(\"abort\", onAbort);\r\n        });\r\n    }\r\n\r\n    let debounceCallback: (() => any) | undefined;\r\n    let lastAbortController: AbortController | null;\r\n\r\n    export function debounce(fn: () => any, ms: number): void {\r\n\r\n        debounceCallback = fn;\r\n        if (lastAbortController) {\r\n            lastAbortController.abort(\"debounced\");\r\n        }\r\n        lastAbortController = new AbortController();\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        delayAsync(ms, lastAbortController.signal).then(debounceCallback);\r\n\r\n    }\r\n}\r\n"],
  "mappings": "AAAA,OAAS,UAAAA,MAAc,cAEhB,IAAUC,MAAV,CAEH,MAAMC,EAAS,IAAIF,EAEZ,SAASG,EAAWC,EAAYC,EAA0C,CAC7E,IAAIC,EAAuB,KAC3B,MAAMC,EAAU,IAAY,CACpBD,IACA,aAAaA,CAAK,EAClBA,EAAQ,MAEZD,GAAA,MAAAA,EAAa,oBAAoB,QAASE,GAC1CL,EAAO,MAAM,eAAe,CAChC,EACA,OAAO,IAAI,QAAQM,GAAK,CACpBF,EAAQ,WAAWE,EAAGJ,CAAE,EACxBC,GAAA,MAAAA,EAAa,iBAAiB,QAASE,EAC3C,CAAC,CACL,CAdON,EAAS,WAAAE,EAgBhB,IAAIM,EACAC,EAEG,SAASC,EAASC,EAAeR,EAAkB,CAEtDK,EAAmBG,EACfF,GACAA,EAAoB,MAAM,WAAW,EAEzCA,EAAsB,IAAI,gBAE1BP,EAAWC,EAAIM,EAAoB,MAAM,EAAE,KAAKD,CAAgB,CAEpE,CAVOR,EAAS,SAAAU,IAvBHV,MAAA",
  "names": ["Logger", "Timing", "logger", "delayAsync", "ms", "abortSignal", "timer", "onAbort", "r", "debounceCallback", "lastAbortController", "debounce", "fn"]
}
